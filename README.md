# Автоматическая кормушка для рыб
### Данный пример можно использовать для любой авто кормушки, я взял самую дешевую электронную кормушку для рыб, которая срабатывала по 12/24 часа и с кнопки. Вынул электронику, мотор подключил через MOSFET, при работе с ардуино нужно использовать понижайку до 3v, так как моя кормушка была от двух батареек.

Проект управления автоматической кормушкой для рыб на базе Arduino Uno. Система поддерживает управление двумя кормушками (баками) с индивидуальным расписанием по дням недели и времени, а также ручное управление через кнопки.

## Структура проекта

```
autofeeder/
├── include/               # Заголовочные файлы
│   ├── components/        # Базовые компоненты
│   │   ├── button/        # Управление кнопками
│   │   ├── clock/         # Работа с часами реального времени
│   │   ├── limit_switch/  # Обработка концевых выключателей
│   │   └── mosfet/        # Управление MOSFET для мотора
│   ├── blocks/            # Логические блоки
│   │   ├── scheduler/     # Планировщик расписания
│   │   └── tank_controller/ # Контроллер управления баком
│   └── config/            # Конфигурационные файлы
│       └── schedule_config.hpp # Конфигурация расписания
└── src/                   # Исходные файлы
    ├── components/        # Реализация базовых компонентов
    ├── blocks/            # Реализация логических блоков
    ├── config/            # Реализация конфигурации
    └── main.cpp           # Основной файл программы
```

## Аппаратные компоненты

1. **Часы реального времени DS1307 (RTC)**
   - Отслеживание текущего времени и даты
   - Работа с расписанием подачи корма

2. **Кнопки для ручного управления**
   - По одной кнопке на каждый бак
   - Активация подачи корма вручную

3. **Концевые выключатели**
   - По одному на каждый бак
   - Остановка мотора при заданном положении

4. **MOSFET модули**
   - Управление моторами кормушек
   - По одному на каждый бак

## Подключение

### Бак 1 (tank20)
- **Кнопка**: Подтягивающий резистор 10кОм между пином 2 и 5V
- **Концевик**: Подтягивающий резистор 10кОм между пином 3 и 5V
- **MOSFET**: пин 4

### Бак 2 (tank10)
- **Кнопка**: Подтягивающий резистор 10кОм между пином 5 и 5V
- **Концевик**: Подтягивающий резистор 10кОм между пином 6 и 5V
- **MOSFET**: пин 7

### Часы DS1307
- **VCC**: 5V Arduino
- **GND**: GND Arduino
- **SDA**: A4 Arduino
- **SCL**: A5 Arduino

## Расписание

Расписание настраивается в файле `src/config/schedule_config.cpp`:

### Бак 1 (tank20)
- Двухразовое кормление: утром (9:00) и вечером (19:00)
- Дни: понедельник, вторник, среда, четверг, пятница, воскресенье

### Бак 2 (tank10)
- Однократное кормление: вечером (20:00)
- Дни: понедельник, вторник, среда, четверг, пятница, воскресенье

## Использование

1. **Ручная активация**:
   - Нажмите соответствующую кнопку для активации кормушки
   - Мотор остановится при срабатывании концевого выключателя

2. **Автоматическая работа**:
   - Кормушки активируются по расписанию
   - Проверка расписания выполняется каждые 45 секунд

## Настройка

Основные параметры настраиваются в файле `main.cpp`:

```cpp
const unsigned long MOSFET_DELAY = 1000;             // Задержка после включения MOSFET в мс
const unsigned long MOSFET_OFF_DELAY = 200;          // Задержка после выключения MOSFET в мс
const unsigned long LIMIT_IGNORE_TIME = 5000;        // Время игнорирования концевика в мс
const unsigned long SCHEDULE_CHECK_INTERVAL = 45000; // Интервал проверки расписания в мс
```

Для изменения расписания отредактируйте файл `src/config/schedule_config.cpp`. Вы можете:
- Добавлять новые расписания
- Отключать существующие расписания
- Изменять время активации